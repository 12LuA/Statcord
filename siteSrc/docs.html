<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Manage your existing and add new bots here.">
		<title>DisStat - API Documentation</title>
		<link rel="shortcut icon" href="./assets/icon.png">

		<link rel="preconnect" href="https://disstat-api.tomatenkuchen.com/" crossorigin>
		<link rel="dns-prefetch" href="https://disstat-api.tomatenkuchen.com/">

		<script src="./assets/main.js"></script>
		<script src="./assets/api.js"></script>
		<link rel="stylesheet" href="./assets/style.css">

		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js" integrity="sha512-SIMGYRUjwY8+gKg7nn9EItdD8LCADSDfJNutF9TPrvEo86sQmFMh6MyralfIyhADlajSxqc7G0gs7+MwWF/ogQ=="
			crossorigin="anonymous" referrerpolicy="no-referrer"
		></script>
	</head>
	<body>
		<global-navbar></global-navbar>

		<main>
			<h1>API Documentation</h1>

			<p>
				Base URL: <code>https://disstat-api.tomatenkuchen.com/v1/</code>
				<br>
				<br>
				Authentification can be done using the <code>Authorization</code> header or the <code>apikey</code> query parameter.
				<br>
				The API key can be found on <a href="./me">your dashboard</a> and is the same for all of your bots.
			</p>

			<br>
			<h2>Getting bot data</h2>

			<p>
				This endpoint returns the basic data DisStat has stored about the bot, like it's username and avatar.
				<br>
				If the bot is private, an API key authorized for the bot must be provided in the Authorization header.
				<br>
				<br>
				Method: <code>GET</code>
				<br>
				URL: <code>https://disstat-api.tomatenkuchen.com/v1/bot/&lt;Bot ID&gt;</code>
			</p>

			<p>Headers:</p>
			<table cellpadding="8" cellspacing="0">
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Authorization</td>
						<td>string</td>
						<td>API key authorized for the bot from the DisStat dashboard.</td>
						<td>Only if the bot is private.</td>
					</tr>
				</tbody>
			</table>

			<p>Query parameters:</p>
			<table cellpadding="8" cellspacing="0">
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>returnStats</td>
						<td>boolean</td>
						<td>Whether the stats should be returned. Defaults to <code>false</code>, set to <code>true</code> to enable.</td>
					</tr>
					<tr>
						<td>dataPoints</td>
						<td>number</td>
						<td>Amount of data points to return if returnStats is enabled.</td>
					</tr>
					<tr>
						<td>start</td>
						<td>number</td>
						<td>The start date to filter the data by if returnStats is enabled. Defaults to no start date.</td>
					</tr>
					<tr>
						<td>end</td>
						<td>number</td>
						<td>The end date to filter the data by if returnStats is enabled. Defaults to no end date.</td>
					</tr>
				</tbody>
			</table>

			<br>
			<h2>Posting bot data</h2>

			<p>
				This endpoint returns the basic data DisStat has stored about the bot, like it's username and avatar.
				<br>
				<br>
				Method: <code>POST</code>
				<br>
				URL: <code>https://disstat-api.tomatenkuchen.com/v1/bot/&lt;Bot ID&gt;</code>
			</p>

			<p>Headers:</p>
			<table cellpadding="8" cellspacing="0">
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Authorization</td>
						<td>string</td>
						<td>API key authorized for the bot from the DisStat dashboard.</td>
						<td>Yes</td>
					</tr>
				</tbody>
			</table>

			<p>Body:</p>
			<table cellpadding="8" cellspacing="0">
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>guilds</td>
						<td>number</td>
						<td>The amount of guilds (servers) the bot is in</td>
						<td>Yes</td>
					</tr>
					<tr>
						<td>users</td>
						<td>number</td>
						<td>The amount of users the bot can see across all servers</td>
						<td>No</td>
					</tr>
					<tr>
						<td>shards</td>
						<td>number</td>
						<td>The amount of shards the bot is running with</td>
						<td>No</td>
					</tr>
					<tr>
						<td>apiPing</td>
						<td>number</td>
						<td>The time in milliseconds how long a ping from/to Discord takes</td>
						<td>No</td>
					</tr>
					<tr>
						<td>ramUsage</td>
						<td>number</td>
						<td>The amount of memory/RAM the bot's process is using currently, in bytes</td>
						<td>No</td>
					</tr>
					<tr>
						<td>ramTotal</td>
						<td>number</td>
						<td>The amount of memory/RAM the bot could use theoretically, in bytes</td>
						<td>No</td>
					</tr>
					<tr>
						<td>cpu</td>
						<td>number</td>
						<td>The current cpu usage of the bot's process</td>
						<td>No</td>
					</tr>
					<tr>
						<td>bandwidth</td>
						<td>number</td>
						<td>The current bandwidth usage of the bot's process, in bytes</td>
						<td>No</td>
					</tr>
					<tr>
						<td>custom</td>
						<td>Array of objects, see the "Posting to custom graphs" section below for the structure</td>
						<td>
							You can send any data this way, and DisStat will try to store it somehow.
							<br>
							<br>
							This can be used for simple custom graphs like the total amount
							<br>
							of tickets created, or the amount of channels your bot sees -
							<br>
							but you can also post an array of objects to create a custom graph.
							<br>
							<br>
							If you're posting a property which we haven't seen before and you have enough
							<br>
							unused custom graph slots, it will be automatically created as custom graph.
						</td>
						<td>No</td>
					</tr>
				</tbody>
			</table>

			<br>
			<h2>Posting to custom graphs</h2>

			<p>
				Stores a custom graph value for the bot without relying on the bot posting it above.
				<br>
				<br>
				Libraries can implement wrappers around this, like the <code>postCommand()</code> function from the official <code>disstat</code> npm package.
				<br>
				<br>
				Method: <code>POST</code>
				<br>
				URL: <code>https://disstat-api.tomatenkuchen.com/v1/bot/&lt;Bot ID&gt;/custom</code>
				<br>
			</p>

			<p>Headers:</p>
			<table cellpadding="8" cellspacing="0">
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Authorization</td>
						<td>string</td>
						<td>API key authorized for the bot from the DisStat dashboard.</td>
						<td>Yes</td>
					</tr>
				</tbody>
			</table>

			<p>Body:</p>
			<table cellpadding="8" cellspacing="0">
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>type</td>
						<td>string</td>
						<td>The name of the custom graph.</td>
						<td>Yes</td>
					</tr>
					<tr>
						<td>value1</td>
						<td>number|string</td>
						<td>The first value as argument for the type</td>
						<td>No</td>
					</tr>
					<tr>
						<td>value2</td>
						<td>number|string</td>
						<td>The second value as argument for the type</td>
						<td>No</td>
					</tr>
					<tr>
						<td>value3</td>
						<td>number|string</td>
						<td>The third value as argument for the type</td>
						<td>No</td>
					</tr>
				</tbody>
			</table>
		</main>

		<script
			src="https://cdn.jsdelivr.net/npm/ionicons@7.2.0/dist/ionicons/ionicons.esm.js" integrity="sha384-zM76IY+3I2OTF49JR8mjLWUeugc/Q9wVzLMiSITfvgmdy8nQtAhci8m8IsdnTl3q"
			type="module" crossorigin="anonymous" data-no-instant
		></script>
		<script src="./assets/instantclick.min.js" data-no-instant></script>
	</body>
</html>
